<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Qlibé‡åŒ–æŠ•èµ„å¹³å° - ä¸“ä¸šçš„é‡åŒ–æŠ•èµ„ç ”ç©¶å·¥å…·</title>
    <meta name="description" content="åŸºäºQlibçš„å¯è§†åŒ–é‡åŒ–æŠ•èµ„å¹³å°ï¼Œæä¾›æ•°æ®ç®¡ç†ã€æ¨¡å‹è®­ç»ƒã€ç­–ç•¥å›æµ‹ç­‰åŠŸèƒ½">
    <link rel="icon" type="image/x-icon" href="favicon.ico">
    <link rel="stylesheet" href="styles.css">
    
    <!-- é¢„åŠ è½½å…³é”®èµ„æº -->
    <link rel="preload" href="https://unpkg.com/react@18/umd/react.production.min.js" as="script">
    <link rel="preload" href="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js" as="script">
</head>
<body>
    <!-- åº”ç”¨åŠ è½½ä¸­çš„å ä½ç¬¦ -->
    <div id="root">
        <div class="app-loading">
            <div class="loading-spinner"></div>
            <div class="loading-text">
                <h2>ğŸš€ Qlibé‡åŒ–å¹³å°</h2>
                <p>æ­£åœ¨åŠ è½½ä¸­...</p>
                <div id="loading-status" style="margin-top: 16px; font-size: 12px; color: rgba(255,255,255,0.8);"></div>
            </div>
        </div>
    </div>

    <!-- æµè§ˆå™¨ä¸æ”¯æŒJSçš„æç¤º -->
    <noscript>
        <div style="text-align: center; padding: 50px; font-family: Arial, sans-serif;">
            <h2>âš ï¸ éœ€è¦å¯ç”¨JavaScript</h2>
            <p>æ­¤åº”ç”¨éœ€è¦JavaScriptæ‰èƒ½æ­£å¸¸è¿è¡Œï¼Œè¯·åœ¨æµè§ˆå™¨ä¸­å¯ç”¨JavaScriptã€‚</p>
        </div>
    </noscript>
    
    <!-- React æ ¸å¿ƒåº“ -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    
    <!-- Babel for JSX è½¬æ¢ -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <!-- å›¾è¡¨åº“ - ç§»é™¤æœ‰é—®é¢˜çš„Rechartsï¼Œæˆ‘ä»¬ä½¿ç”¨åŸç”ŸSVGç»˜åˆ¶å›¾è¡¨ -->
    
    <!-- APIæ¥å£ -->
    <script type="text/babel" src="api/qlib-api.js"></script>
    
    <!-- åº”ç”¨ç»„ä»¶ (é™æ€åŠ è½½ï¼ŒæŒ‰ä¾èµ–é¡ºåº) -->
    <script type="text/babel" src="components/Layout.js"></script>
    <script type="text/babel" src="components/Dashboard.js"></script>
    <script type="text/babel" src="components/DataManagement.js"></script>
    <!-- å› å­ç ”ç©¶ç›¸å…³ç»„ä»¶ -->
    <script type="text/babel" src="components/FactorWorkshop.js"></script>
    <script type="text/babel" src="components/FactorEditor.js"></script>
    <script type="text/babel" src="components/FactorAnalysis.js"></script>
    <script type="text/babel" src="components/FactorResearch.js"></script>
    <!-- æ ¸å¿ƒå·¥ä½œæµå¼•æ“ -->
    <script type="text/babel" src="components/QlibWorkflow.js"></script>
    <!-- ç»“æœåˆ†æä¸­å¿ƒ -->
    <script type="text/babel" src="components/ResultsAnalysis.js"></script>
    
    <!-- ä¸»åº”ç”¨å…¥å£ -->
    <script type="text/babel" src="app.js"></script>

    <!-- ç®€åŒ–çš„é”™è¯¯å¤„ç† -->
    <script>
        // ç®€å•çš„é”™è¯¯å¤„ç†
        window.onerror = function(msg, url, lineNo, columnNo, error) {
            console.error('JavaScripté”™è¯¯:', { msg, url, lineNo, columnNo, error });
            
            // æ˜¾ç¤ºå‹å¥½çš„é”™è¯¯ä¿¡æ¯
            const loadingDiv = document.querySelector('.app-loading');
            if (loadingDiv) {
                loadingDiv.innerHTML = `
                    <div style="text-align: center; color: #ff4d4f;">
                        <h2>âŒ é¡µé¢åŠ è½½å‡ºé”™</h2>
                        <p>é”™è¯¯ä¿¡æ¯: ${msg}</p>
                        <p>å¯èƒ½åŸå› : ç½‘ç»œè¿æ¥é—®é¢˜æˆ–è„šæœ¬åŠ è½½å¤±è´¥</p>
                        <button onclick="window.location.reload()" style="
                            background: #ff4d4f; 
                            color: white; 
                            border: none; 
                            padding: 12px 24px; 
                            border-radius: 6px; 
                            cursor: pointer;
                            margin-top: 20px;
                            font-size: 16px;
                        ">
                            ğŸ”„ é‡æ–°åŠ è½½
                        </button>
                        <p style="margin-top: 16px; font-size: 12px; opacity: 0.8;">
                            å¦‚æœé—®é¢˜æŒç»­å­˜åœ¨ï¼Œè¯·æ£€æŸ¥ç½‘ç»œè¿æ¥æˆ–å°è¯•ä½¿ç”¨ single-page.html
                        </p>
                    </div>
                `;
            }
            return false;
        };

        // ç­‰å¾…é¡µé¢å®Œå…¨åŠ è½½åï¼Œè‡ªåŠ¨éšè—åŠ è½½å±å¹•
        window.addEventListener('load', function() {
            setTimeout(() => {
                const loadingDiv = document.querySelector('.app-loading');
                if (loadingDiv && document.querySelector('#root').children.length > 1) {
                    loadingDiv.style.display = 'none';
                }
            }, 2000); // 2ç§’åæ£€æŸ¥æ˜¯å¦åŠ è½½å®Œæˆ
        });
    </script>
</body>
</html>